document.getElementById("fetchTimes").addEventListener("click", function() {
    var postalCode = document.getElementById("postalCode").value;
    if (postalCode.length === 5) {
        fetchPrayerTimes(postalCode);
    } else {
        alert("Bitte gib eine gültige PLZ ein.");
    }
});

function fetchPrayerTimes(postalCode) {
    // API-Aufruf zu PrayTimes
    fetch(`https://api.pray.zone/v2/times/today.json?city=${postalCode}&country=Germany&method=2`)
        .then(response => response.json())
        .then(data => {
            if (data.status === "OK") {
                displayPrayerTimes(data.results.timings);
            } else {
                alert("Es gab ein Problem beim Abrufen der Gebetszeiten.");
            }
        })
        .catch(error => {
            console.error("Fehler:", error);
        });
}

function displayPrayerTimes(times) {
    var list = document.getElementById("timesList");
    list.innerHTML = '';  // Vorherige Einträge löschen
    for (var prayer in times) {
        var listItem = document.createElement("li");
        listItem.textContent = `${prayer}: ${times[prayer]}`;
        list.appendChild(listItem);
    }
}
