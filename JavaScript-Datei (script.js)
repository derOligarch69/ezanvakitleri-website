  // API-Konfiguration
const apiBaseUrl = "https://api.aladhan.com/v1/timingsByAddress?address=";
const method = "&method=2"; // Berechnungsmethode, hier Hanafi/ISNA

// DOM-Elemente
const postalCodeInput = document.getElementById("postalCode");
const fetchTimesButton = document.getElementById("fetchTimes");
const timesList = document.getElementById("timesList");

// Funktion: Gebetszeiten abrufen
async function fetchPrayerTimes(postalCode) {
    try {
        const response = await fetch(`${apiBaseUrl}${postalCode}${method}`);
        const data = await response.json();

        if (data.code === 200) {
            const timings = data.data.timings;
            displayPrayerTimes(timings);
        } else {
            alert("Fehler: Gebetszeiten konnten nicht abgerufen werden.");
        }
    } catch (error) {
        console.error("API-Fehler:", error);
        alert("Ein Fehler ist aufgetreten. Bitte versuchen Sie es später erneut.");
    }
}

// Funktion: Gebetszeiten anzeigen
function displayPrayerTimes(timings) {
    const prayerNames = {
        Fajr: "İmsak",
        Dhuhr: "Öğle",
        Asr: "İkindi",
        Maghrib: "Akşam",
        Isha: "Yatsı"
    };

    timesList.innerHTML = ""; // Liste leeren

    for (const [key, value] of Object.entries(timings)) {
        if (prayerNames[key]) {
            const listItem = document.createElement("li");
            listItem.innerHTML = `${key}: ${value} <div class="turkish-name">${prayerNames[key]}</div>`;
            timesList.appendChild(listItem);
        }
    }
}

// Event-Listener für den Button
fetchTimesButton.addEventListener("click", () => {
    const postalCode = postalCodeInput.value.trim();
    if (postalCode.length === 5) {
        fetchPrayerTimes(postalCode);
    } else {
        alert("Bitte geben Sie eine gültige PLZ ein.");
    }
});
