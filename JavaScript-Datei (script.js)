document.getElementById("fetchTimes").addEventListener("click", function() {
    var postalCode = document.getElementById("postalCode").value;
    if (postalCode.length == 5) {
        fetchPrayerTimes(postalCode);
    } else {
        alert("Bitte geben Sie eine gültige PLZ ein.");
    }
});

function fetchPrayerTimes(postalCode) {
    fetch(`https://api.aladhan.com/v1/timingsByCity?city=${postalCode}&country=Germany&method=2`)
        .then(response => response.json())
        .then(data => {
            if (data.code === 200) {
                displayPrayerTimes(data.data.timings);
            } else {
                alert("Es gab ein Problem beim Abrufen der Gebetszeiten.");
            }
        })
        .catch(error => {
            console.error("Fehler:", error);
        });
}

function displayPrayerTimes(times) {
    var list = document.getElementById("timesList");
    list.innerHTML = '';  // Vorherige Einträge löschen
    for (var prayer in times) {
        var listItem = document.createElement("li");
        listItem.textContent = `${prayer}: ${times[prayer]}`;
        list.appendChild(listItem);
    }
}
